author: BenSweaterVest
core-version: >=5.3.0
description: A complete blogging solution with WordPress-style UI and automatic GitHub saving via Cloudflare Functions
list: readme
plugin-type: plugin
title: $:/plugins/collaborative-blog
type: application/json
version: 2.0.0

{"tiddlers": {"$:/plugins/collaborative-blog/styles": {"title": "$:/plugins/collaborative-blog/styles", "tags": "$:/tags/Stylesheet", "type": "text/css", "text": "/* ===== HIDE WIKI ELEMENTS ===== */\n\n/* Hide default edit, save, new buttons */\n.tc-page-controls,\n.tc-tiddler-controls,\n.tc-sidebar-scrollable,\nbutton[aria-label=\"new tiddler\"],\nbutton[aria-label=\"save wiki\"],\n.tc-topbar-right,\n.tc-unfold-banner {\n  display: none !important;\n}\n\n/* Hide the default sidebar */\n.tc-sidebar-scrollable {\n  display: none !important;\n}\n\n/* ===== LAYOUT STRUCTURE ===== */\n\n/* Main page container - add left margin for sidebar */\n.tc-page-container {\n  margin-left: 280px;\n  max-width: 900px;\n  padding: 2rem;\n}\n\n/* Story river (main content area) */\n.tc-story-river {\n  width: 100%;\n  padding: 0;\n}\n\n/* ===== TYPOGRAPHY ===== */\n\n/* Base font styling - professional, readable */\nhtml body.tc-body {\n  font-family: Georgia, 'Times New Roman', serif;\n  line-height: 1.7;\n  color: #333;\n  background: #f8f8f6;\n}\n\nh1, h2, h3, h4, h5, h6 {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;\n  color: #2c3e50;\n  font-weight: 600;\n  line-height: 1.3;\n}\n\n/* ===== LEFT SIDEBAR NAVIGATION ===== */\n\n.cb-sidebar {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 280px;\n  height: 100vh;\n  background: #2c3e50;\n  color: #ecf0f1;\n  padding: 2rem 1.5rem;\n  overflow-y: auto;\n  box-shadow: 2px 0 10px rgba(0,0,0,0.1);\n  z-index: 1000;\n}\n\n.cb-site-title {\n  font-size: 1.5rem;\n  font-weight: 700;\n  margin-bottom: 0.5rem;\n  color: #fff;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;\n}\n\n.cb-site-subtitle {\n  font-size: 0.9rem;\n  color: #95a5a6;\n  margin-bottom: 2rem;\n  font-style: italic;\n}\n\n.cb-nav-menu {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.cb-nav-menu li {\n  margin-bottom: 0.5rem;\n}\n\n.cb-nav-menu a {\n  color: #ecf0f1;\n  text-decoration: none;\n  display: block;\n  padding: 0.5rem 0.75rem;\n  border-radius: 4px;\n  transition: background 0.2s;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;\n}\n\n.cb-nav-menu a:hover {\n  background: rgba(255,255,255,0.1);\n  color: #fff;\n}\n\n.cb-login-link {\n  margin-top: 3rem;\n  padding-top: 2rem;\n  border-top: 1px solid rgba(255,255,255,0.1);\n}\n\n.cb-login-link a,\n.cb-login-link button {\n  color: #95a5a6;\n  font-size: 0.85rem;\n  text-decoration: none;\n  opacity: 0.6;\n  transition: opacity 0.2s;\n}\n\n.cb-login-link a:hover,\n.cb-login-link button:hover {\n  opacity: 1;\n  color: #bdc3c7;\n}\n\n/* Sidebar sections (Recently Updated, Favorite Articles) */\n.cb-sidebar-section {\n  margin-top: 2rem;\n  padding-top: 1.5rem;\n  border-top: 1px solid rgba(255,255,255,0.1);\n}\n\n.cb-sidebar-heading {\n  font-size: 0.85rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  color: #95a5a6;\n  margin-bottom: 0.75rem;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;\n}\n\n.cb-sidebar-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.cb-sidebar-list-item {\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n}\n\n.cb-sidebar-list-item a {\n  color: #ecf0f1;\n  text-decoration: none;\n  display: block;\n  padding: 0.4rem 0.5rem;\n  border-radius: 3px;\n  transition: background 0.2s;\n  line-height: 1.4;\n}\n\n.cb-sidebar-list-item a:hover {\n  background: rgba(255,255,255,0.1);\n  color: #fff;\n}\n\n.cb-sidebar-list-item.cb-sidebar-empty {\n  color: #7f8c8d;\n  font-style: italic;\n  font-size: 0.85rem;\n  padding: 0.4rem 0.5rem;\n}\n\n/* ===== BLOG POST STYLING ===== */\n\n.cb-post,\n.cb-page {\n  background: #fff;\n  padding: 2.5rem;\n  margin-bottom: 2rem;\n  border-radius: 2px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.cb-post-title {\n  font-size: 2.25rem;\n  margin-bottom: 1rem;\n  color: #2c3e50;\n  line-height: 1.2;\n}\n\n.cb-post-meta {\n  color: #7f8c8d;\n  font-size: 0.95rem;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1.5rem;\n  border-bottom: 1px solid #ecf0f1;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;\n}\n\n.cb-post-author {\n  font-weight: 600;\n  color: #34495e;\n}\n\n.cb-post-date {\n  margin-left: 1rem;\n}\n\n.cb-post-categories {\n  margin-left: 1rem;\n}\n\n.cb-post-content {\n  font-size: 1.1rem;\n  line-height: 1.8;\n}\n\n.cb-post-content p {\n  margin-bottom: 1.2rem;\n}\n\n/* ===== HOMEPAGE POST LIST ===== */\n\n.cb-post-list-item {\n  background: #fff;\n  padding: 2rem;\n  margin-bottom: 1.5rem;\n  border-radius: 2px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.08);\n  transition: box-shadow 0.2s;\n}\n\n.cb-post-list-item:hover {\n  box-shadow: 0 4px 12px rgba(0,0,0,0.12);\n}\n\n.cb-post-list-title {\n  font-size: 1.75rem;\n  margin-bottom: 0.5rem;\n}\n\n.cb-post-list-title a {\n  color: #2c3e50;\n  text-decoration: none;\n}\n\n.cb-post-list-title a:hover {\n  color: #3498db;\n}\n\n.cb-post-excerpt {\n  color: #555;\n  line-height: 1.6;\n  margin-top: 1rem;\n}\n\n.cb-read-more {\n  display: inline-block;\n  margin-top: 1rem;\n  color: #3498db;\n  text-decoration: none;\n  font-weight: 600;\n  font-size: 0.95rem;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;\n}\n\n.cb-read-more:hover {\n  color: #2980b9;\n}\n\n/* ===== FEATURED POST ===== */\n\n.cb-featured-post {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: #fff;\n  padding: 3rem;\n  margin-bottom: 2rem;\n  border-radius: 4px;\n  box-shadow: 0 4px 15px rgba(0,0,0,0.2);\n}\n\n.cb-featured-badge {\n  display: inline-block;\n  background: rgba(255,255,255,0.2);\n  padding: 0.25rem 0.75rem;\n  border-radius: 3px;\n  font-size: 0.75rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-bottom: 1rem;\n  font-weight: 600;\n}\n\n.cb-featured-post .cb-post-list-title a {\n  color: #fff;\n  font-size: 2.5rem;\n}\n\n.cb-featured-post .cb-post-meta,\n.cb-featured-post .cb-post-excerpt {\n  color: rgba(255,255,255,0.9);\n}\n\n.cb-featured-post .cb-read-more {\n  color: #fff;\n  border: 2px solid rgba(255,255,255,0.5);\n  padding: 0.5rem 1.5rem;\n  border-radius: 3px;\n  display: inline-block;\n  margin-top: 1rem;\n}\n\n.cb-featured-post .cb-read-more:hover {\n  background: rgba(255,255,255,0.1);\n  border-color: #fff;\n}\n\n/* ===== CATEGORY TAGS ===== */\n\n.cb-category-tag {\n  display: inline-block;\n  background: #ecf0f1;\n  color: #34495e;\n  padding: 0.25rem 0.75rem;\n  border-radius: 3px;\n  font-size: 0.85rem;\n  margin-right: 0.5rem;\n  text-decoration: none;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;\n}\n\n.cb-category-tag:hover {\n  background: #bdc3c7;\n  color: #2c3e50;\n}\n\n/* ===== TABLE OF CONTENTS ===== */\n\n.cb-toc {\n  background: #fff;\n  padding: 2rem;\n  border-radius: 2px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.cb-toc h2 {\n  margin-top: 0;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid #3498db;\n}\n\n.cb-toc-list {\n  list-style: none;\n  padding: 0;\n}\n\n.cb-toc-list li {\n  padding: 0.75rem 0;\n  border-bottom: 1px solid #ecf0f1;\n}\n\n.cb-toc-list li:last-child {\n  border-bottom: none;\n}\n\n/* ===== ADMIN PANEL ===== */\n\n.cb-admin-panel {\n  position: fixed;\n  top: 0;\n  left: 280px;\n  right: 0;\n  background: #fff;\n  border-bottom: 3px solid #e74c3c;\n  padding: 1.5rem;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n  z-index: 999;\n  display: none;\n}\n\n.cb-admin-panel.active {\n  display: block;\n}\n\n.cb-admin-panel h3 {\n  margin-top: 0;\n  color: #e74c3c;\n  font-size: 1.25rem;\n}\n\n.cb-admin-actions {\n  display: flex;\n  gap: 1rem;\n  margin-top: 1rem;\n}\n\n.cb-admin-button {\n  background: #3498db;\n  color: #fff;\n  border: none;\n  padding: 0.5rem 1.25rem;\n  border-radius: 3px;\n  cursor: pointer;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;\n  font-size: 0.95rem;\n  transition: background 0.2s;\n}\n\n.cb-admin-button:hover {\n  background: #2980b9;\n}\n\n.cb-admin-button.danger {\n  background: #e74c3c;\n}\n\n.cb-admin-button.danger:hover {\n  background: #c0392b;\n}\n\n/* ===== LOGIN MODAL ===== */\n\n.cb-login-modal {\n  padding: 2rem;\n  max-width: 400px;\n}\n\n.cb-login-title {\n  margin-top: 0;\n  margin-bottom: 0.5rem;\n  color: #2c3e50;\n}\n\n.cb-login-description {\n  color: #7f8c8d;\n  margin-bottom: 1.5rem;\n  font-size: 0.95rem;\n}\n\n.cb-login-input {\n  width: 100%;\n  padding: 0.75rem;\n  border: 2px solid #ecf0f1;\n  border-radius: 4px;\n  font-size: 1rem;\n  margin-bottom: 1rem;\n  transition: border-color 0.2s;\n}\n\n.cb-login-input:focus {\n  outline: none;\n  border-color: #3498db;\n}\n\n.cb-login-actions {\n  display: flex;\n  gap: 0.75rem;\n  margin-top: 1.5rem;\n}\n\n.cb-login-button {\n  flex: 1;\n  padding: 0.75rem 1.5rem;\n  border: none;\n  border-radius: 4px;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background 0.2s;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;\n}\n\n.cb-login-submit {\n  background: #3498db;\n  color: #fff;\n}\n\n.cb-login-submit:hover {\n  background: #2980b9;\n}\n\n.cb-login-cancel {\n  background: #95a5a6;\n  color: #fff;\n}\n\n.cb-login-cancel:hover {\n  background: #7f8c8d;\n}\n\n.cb-login-error {\n  margin-top: 1rem;\n  padding: 0.75rem;\n  background: #fee;\n  border-left: 4px solid #e74c3c;\n  color: #c0392b;\n  border-radius: 3px;\n  font-size: 0.9rem;\n}\n\n.cb-logout-btn {\n  margin-left: 0.5rem;\n  opacity: 0.8;\n}\n\n.cb-logout-btn:hover {\n  opacity: 1;\n}\n\n/* ===== RESPONSIVE DESIGN ===== */\n\n@media (max-width: 768px) {\n  .cb-sidebar {\n    width: 100%;\n    height: auto;\n    position: relative;\n  }\n\n  .tc-page-container {\n    margin-left: 0;\n    padding: 1rem;\n  }\n\n  .cb-admin-panel {\n    left: 0;\n  }\n}\n"}, "$:/plugins/collaborative-blog/Navigation": {"title": "$:/plugins/collaborative-blog/Navigation", "tags": "$:/tags/PageTemplate", "type": "text/vnd.tiddlywiki", "text": "<!--\n  Left Sidebar Navigation Component\n\n  This template creates the fixed left sidebar navigation that appears on every page\n  Tagged with $:/tags/PageTemplate to render as part of the page template\n\n  Features:\n  - Fixed position sidebar (280px wide on desktop)\n  - Site title and subtitle displayed at top\n  - Main navigation menu\n  - Discrete \"Admin\" link to toggle admin panel\n  - Responsive design (full width on mobile)\n\n  Customization:\n  - Edit $:/SiteTitle and $:/SiteSubtitle to change site branding\n  - Modify the menu items below to add/remove navigation links\n  - Styles defined in styles.tid (.cb-sidebar, .cb-nav-menu, etc.)\n-->\n\n<!-- Macro: site-title\n     Retrieves the site title from $:/SiteTitle tiddler\n     Allows users to change the site title in one place\n-->\n\\define site-title()\n<$view tiddler=\"$:/SiteTitle\" field=\"text\"/>\n\\end\n\n<!-- Macro: site-subtitle\n     Retrieves the site subtitle/tagline from $:/SiteSubtitle tiddler\n     Displayed below the main title in muted text\n-->\n\\define site-subtitle()\n<$view tiddler=\"$:/SiteSubtitle\" field=\"text\"/>\n\\end\n\n<div class=\"cb-sidebar\">\n  <!-- Site branding: title and subtitle -->\n  <div class=\"cb-site-title\"><<site-title>></div>\n  <div class=\"cb-site-subtitle\"><<site-subtitle>></div>\n\n  <!-- Main navigation menu\n       To customize: Add or remove <li> items below\n       Each <$link> creates a link to the specified tiddler title\n  -->\n  <nav>\n    <ul class=\"cb-nav-menu\">\n      <li><$link to=\"Home\">Home</$link></li>\n      <li><$link to=\"About\">About</$link></li>\n      <li><$link to=\"All Posts\">Archive</$link></li>\n      <li><$link to=\"Categories\">Categories</$link></li>\n      <li><$link to=\"Contact\">Contact</$link></li>\n    </ul>\n  </nav>\n\n  <!-- Recently Updated Section\n       Shows the 5 most recently modified posts\n       Uses TiddlyWiki's automatic 'modified' field for sorting\n  -->\n  <div class=\"cb-sidebar-section\">\n    <h4 class=\"cb-sidebar-heading\">Recently Updated</h4>\n    <ul class=\"cb-sidebar-list\">\n      <$list filter=\"[tag[Post]!tag[Draft]has[modified]!sort[modified]limit[5]]\">\n        <li class=\"cb-sidebar-list-item\">\n          <$link to=<<currentTiddler>>>\n            <$view field=\"title\"/>\n          </$link>\n        </li>\n      </$list>\n    </ul>\n  </div>\n\n  <!-- Favorite Articles Section\n       Shows posts tagged with \"Favorite\"\n       Limited to 5 items\n  -->\n  <div class=\"cb-sidebar-section\">\n    <h4 class=\"cb-sidebar-heading\">Favorite Articles</h4>\n    <ul class=\"cb-sidebar-list\">\n      <$list filter=\"[tag[Post]tag[Favorite]!tag[Draft]limit[5]]\">\n        <li class=\"cb-sidebar-list-item\">\n          <$link to=<<currentTiddler>>>\n            <$view field=\"title\"/>\n          </$link>\n        </li>\n      </$list>\n      <$list filter=\"[tag[Post]tag[Favorite]!tag[Draft]count[]compare:number:eq[0]]\" variable=\"null\">\n        <li class=\"cb-sidebar-list-item cb-sidebar-empty\">\n          No favorites yet\n        </li>\n      </$list>\n    </ul>\n  </div>\n\n  <!-- Admin Panel Toggle\n       Toggles the visibility of the admin panel\n       Authentication is handled by Cloudflare saver when you save changes\n  -->\n  <div class=\"cb-admin-link\">\n    <$button class=\"tc-btn-invisible tc-tiddlylink\">\n      Admin\n      <$action-setfield $tiddler=\"$:/state/admin-panel-visible\" text={{$:/state/admin-panel-visible}} />\n      <$list filter=\"[[$:/state/admin-panel-visible]get[text]match[yes]]\">\n        <$action-setfield $tiddler=\"$:/state/admin-panel-visible\" text=\"no\" />\n      </$list>\n      <$list filter=\"[[$:/state/admin-panel-visible]get[text]!match[yes]]\">\n        <$action-setfield $tiddler=\"$:/state/admin-panel-visible\" text=\"yes\" />\n      </$list>\n    </$button>\n  </div>\n</div>\n"}, "$:/plugins/collaborative-blog/AdminPanel": {"title": "$:/plugins/collaborative-blog/AdminPanel", "tags": "$:/tags/PageTemplate", "type": "text/vnd.tiddlywiki", "text": "<!--\n  Admin Panel Component\n\n  This panel appears at the top of the page when activated via the \"Admin\" link in the sidebar\n  Provides quick access to common blog management tasks\n\n  Features:\n  - Hidden by default (only renders when state tiddler is \"yes\")\n  - Activated by clicking \"Admin\" link which toggles state tiddler\n  - Contains buttons for creating posts, pages, and accessing settings\n  - Fixed position at top of page when active\n\n  State management: Uses $:/state/admin-panel-visible tiddler to track visibility\n  Authentication: Handled by Cloudflare saver when saving changes\n-->\n\n<!-- Only render admin panel if panel visibility is \"yes\" -->\n<$list filter=\"[[$:/state/admin-panel-visible]get[text]match[yes]]\" variable=\"null\">\n<div class=\"cb-admin-panel active\">\n  <h3>Admin Panel</h3>\n  <div class=\"cb-admin-actions\">\n\n    <!-- New Post Button\n         Creates a new tiddler with the \"Post\" tag pre-applied\n         ARIA: Screen readers will announce \"Create new blog post\"\n    -->\n    <$button class=\"cb-admin-button\" aria-label=\"Create new blog post\">\n      {{$:/core/images/new-button}} New Post\n      <$action-sendmessage $message=\"tm-new-tiddler\" tags=\"Post\" />\n    </$button>\n\n    <!-- New Page Button\n         Creates a new tiddler with the \"Page\" tag pre-applied\n         ARIA: Screen readers will announce \"Create new static page\"\n    -->\n    <$button class=\"cb-admin-button\" aria-label=\"Create new static page\">\n      {{$:/core/images/new-button}} New Page\n      <$action-sendmessage $message=\"tm-new-tiddler\" tags=\"Page\" />\n    </$button>\n\n    <!-- Control Panel Button\n         Opens TiddlyWiki's control panel modal for advanced settings\n         ARIA: Screen readers will announce \"Open TiddlyWiki control panel\"\n    -->\n    <$button class=\"cb-admin-button\" aria-label=\"Open TiddlyWiki control panel\">\n      {{$:/core/images/options-button}} Control Panel\n      <$action-sendmessage $message=\"tm-modal\" $param=\"$:/ControlPanel\" />\n    </$button>\n\n    <!-- Save Changes Button\n         Triggers the save operation to download the updated HTML file\n         ARIA: Screen readers will announce \"Save all changes to wiki\"\n    -->\n    <$button class=\"cb-admin-button\" aria-label=\"Save all changes to wiki\">\n      {{$:/core/images/save-button}} Save Changes\n      <$action-sendmessage $message=\"tm-save-wiki\" />\n    </$button>\n\n    <!-- Advanced Search Button\n         Opens TiddlyWiki's advanced search modal\n         ARIA: Screen readers will announce \"Open advanced search\"\n    -->\n    <$button class=\"cb-admin-button\" aria-label=\"Open advanced search\">\n      {{$:/core/images/advanced-search-button}} Advanced Search\n      <$action-sendmessage $message=\"tm-modal\" $param=\"$:/AdvancedSearch\" />\n    </$button>\n  </div>\n</div>\n</$list>\n"}, "$:/plugins/collaborative-blog/ViewTemplate/SystemTiddler": {"title": "$:/plugins/collaborative-blog/ViewTemplate/SystemTiddler", "tags": "$:/tags/ViewTemplate", "type": "text/vnd.tiddlywiki", "list-before": "$:/core/ui/ViewTemplate/body", "text": "<!--\n  ViewTemplate to hide system tiddlers from story view\n\n  System tiddlers (those starting with $:/) should not appear in the blog's story river\n  They should only be accessible via modals (Control Panel, Advanced Search, etc.)\n\n  This template runs before the body template and prevents system tiddlers from rendering\n  Exception: Our own plugin tiddlers that need to be visible are excluded\n-->\n\n<$list filter=\"[<currentTiddler>prefix[$:/]!prefix[$:/plugins/collaborative-blog]]\" variable=\"null\">\n  <div style=\"display: none;\">\n    <!-- System tiddler hidden from story view -->\n  </div>\n</$list>\n"}, "$:/plugins/collaborative-blog/ViewTemplate/Post": {"title": "$:/plugins/collaborative-blog/ViewTemplate/Post", "tags": "$:/tags/ViewTemplate", "type": "text/vnd.tiddlywiki", "list-after": "$:/core/ui/ViewTemplate/title", "text": "<!--\n  ViewTemplate for Blog Posts\n\n  This template activates when viewing any tiddler tagged with \"Post\"\n  It replaces the default TiddlyWiki view with a blog-style post layout\n\n  Key features:\n  - Shows post title, author, date, and category tags\n  - Displays full post content\n  - Provides back navigation to homepage\n  - Automatically hides wiki controls via CSS\n\n  list-after: Ensures this template runs after the core title template\n-->\n\n<!-- Macro: post-body\n     Renders the complete blog post layout including title, metadata, content, and navigation\n     Context: Called only when currentTiddler has \"Post\" tag\n-->\n\\define post-body()\n<div class=\"cb-post\">\n  <!-- Post title -->\n  <h1 class=\"cb-post-title\"><$view field=\"title\"/></h1>\n\n  <!-- Post metadata section: author, date, categories -->\n  <div class=\"cb-post-meta\">\n    <!-- Display author name if the author field exists -->\n    <$list filter=\"[<currentTiddler>has[author]]\" variable=\"null\">\n      <span class=\"cb-post-author\">\n        By <$view field=\"author\"/>\n      </span>\n    </$list>\n\n    <!-- Display formatted date if the date field exists (YYYYMMDD -> DD MMM YYYY) -->\n    <$list filter=\"[<currentTiddler>has[date]]\" variable=\"null\">\n      <span class=\"cb-post-date\">\n        <$view field=\"date\" format=\"date\" template=\"DD MMM YYYY\"/>\n      </span>\n    </$list>\n\n    <!-- Display category tags (filters out system tags: Post, Featured, Draft) -->\n    <$list filter=\"[<currentTiddler>tags[]!tag[Post]!tag[Featured]!tag[Draft]]\" variable=\"tag\">\n      <span class=\"cb-post-categories\">\n        <a class=\"cb-category-tag\" href={{{ [<tag>addprefix[#]] }}}>\n          <<tag>>\n        </a>\n      </span>\n    </$list>\n  </div>\n\n  <!-- Full post content (transcluded from the text field) -->\n  <div class=\"cb-post-content\">\n    <$transclude field=\"text\" mode=\"block\"/>\n  </div>\n\n  <!-- Navigation: Back to homepage link -->\n  <div style=\"margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #ecf0f1;\">\n    <$link to=\"Home\" style=\"color: #3498db; text-decoration: none;\">‚Üê Back to Home</$link>\n  </div>\n</div>\n\\end\n\n<!-- Template activation: Only render this template for tiddlers tagged with \"Post\"\n     Filter: [<currentTiddler>tag[Post]]\n     This prevents the blog post layout from appearing on pages, admin tiddlers, etc.\n-->\n<$list filter=\"[<currentTiddler>tag[Post]]\" variable=\"null\">\n  <<post-body>>\n</$list>\n"}, "$:/plugins/collaborative-blog/ViewTemplate/Page": {"title": "$:/plugins/collaborative-blog/ViewTemplate/Page", "tags": "$:/tags/ViewTemplate", "type": "text/vnd.tiddlywiki", "list-after": "$:/plugins/collaborative-blog/ViewTemplate/Post", "text": "<!--\n  ViewTemplate for Static Pages\n\n  This template activates when viewing any tiddler tagged with \"Page\"\n  It provides a simpler layout than blog posts (no author, date, or category metadata)\n\n  Use this for static content like:\n  - About page\n  - Contact page\n  - Privacy policy\n  - Terms of service\n  - Project pages\n\n  list-after: Runs after the Post ViewTemplate to avoid conflicts\n-->\n\n<!-- Macro: page-body\n     Renders a simple page layout with title, content, and navigation\n     Simpler than post-body - no metadata fields\n     Context: Called only when currentTiddler has \"Page\" tag\n-->\n\\define page-body()\n<div class=\"cb-page\">\n  <!-- Page title -->\n  <h1 class=\"cb-post-title\"><$view field=\"title\"/></h1>\n\n  <!-- Page content (transcluded from the text field) -->\n  <div class=\"cb-post-content\">\n    <$transclude field=\"text\" mode=\"block\"/>\n  </div>\n\n  <!-- Navigation: Back to homepage link -->\n  <div style=\"margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #ecf0f1;\">\n    <$link to=\"Home\" style=\"color: #3498db; text-decoration: none;\">‚Üê Back to Home</$link>\n  </div>\n</div>\n\\end\n\n<!-- Template activation: Only render this template for tiddlers tagged with \"Page\"\n     Filter: [<currentTiddler>tag[Page]]\n     This prevents the page layout from appearing on posts, admin tiddlers, etc.\n-->\n<$list filter=\"[<currentTiddler>tag[Page]]\" variable=\"null\">\n  <<page-body>>\n</$list>\n"}, "$:/plugins/collaborative-blog/readme": {"title": "$:/plugins/collaborative-blog/readme", "type": "text/vnd.tiddlywiki", "text": "! Collaborative Blog Plugin\n\nThis plugin transforms TiddlyWiki into a WordPress-style collaborative blog with a clean, professional interface.\n\n!! Features\n\n* Clean blog layout with hidden wiki controls\n* Left sidebar navigation with recently updated and favorite articles\n* Multiple author support\n* Featured posts\n* Categories and tags\n* Post archive and table of contents\n* Discrete admin panel\n* Automatic GitHub saving via Cloudflare Functions (integrated)\n* Password-protected saves with session management\n* Save notifications and statistics\n* Historical society / nonprofit aesthetic\n\n!! Quick Start\n\n!!! Creating a Blog Post\n\n# Click ''Admin'' in the left sidebar\n# Click ''New Post''\n# Add fields:\n#* Title: Your post title\n#* Tags: `Post` plus category tags (e.g., `Post News Events`)\n#* Author: Your name\n#* Date: YYYYMMDD format (e.g., `20251108`)\n#* Excerpt: Brief summary (optional)\n# Write your content\n# Save\n\n!!! Creating a Featured Post\n\nAdd `Featured` to the tags field (e.g., `Post Featured News`)\n\n!!! Creating a Static Page\n\n# Click ''New Page'' in admin panel\n# Add Title and set Tags to `Page`\n# Write content and save\n\n!!! Saving as Draft\n\nAdd `Draft` to tags to hide from public view\n\n!! Customization\n\n* Edit `$:/SiteTitle` and `$:/SiteSubtitle` to change site name\n* Edit `$:/plugins/collaborative-blog/Navigation` to customize menu\n* Edit `$:/plugins/collaborative-blog/styles` to change colors and fonts\n\n!! Documentation\n\nFor full documentation, see the README.md file in the repository.\n\n!! Automatic Saving & Deployment\n\nThis plugin includes integrated automatic saving to GitHub via Cloudflare Functions.\n\n''What's included:''\n\n* Beautiful blog UI and editing experience\n* Automatic GitHub save mechanism (built-in)\n* Real-time deployment via Cloudflare Pages\n* Password-protected saves\n* Save statistics and connection monitoring\n\n''Setup:'' Configure the Cloudflare saver in the Control Panel ‚Üí Saving tab. You'll need to set up a Cloudflare Pages site with a GitHub repository containing a `functions/save.js` file.\n\n!! Support\n\n* GitHub: https://github.com/BenSweaterVest/TiddlySite\n* TiddlyWiki Community: https://talk.tiddlywiki.org/\n"}, "$:/plugins/collaborative-blog/saver.js": {"title": "$:/plugins/collaborative-blog/saver.js", "type": "application/javascript", "module-type": "saver", "text": "(function(){\n\n  'use strict';\n\n  /**\n * CloudflareSaver constructor\n * @param {Object} wiki - TiddlyWiki wiki object\n */\n  const CloudflareSaver = function(wiki) {\n    this.wiki = wiki;\n    this.sessionPassword = null; // Store password for session if enabled\n\n    // Listen for clear password events\n    const self = this;\n    $tw.rootWidget.addEventListener('cloudflare-clear-password', () => {\n      self.sessionPassword = null;\n    });\n  };\n\n  CloudflareSaver.prototype.save = function(text, method, callback, options) {\n    const self = this;\n    options = options || {};\n\n    // Check if this saver is enabled\n    const enabled = self.wiki.getTiddlerText('$:/config/cloudflare-saver/enabled', 'no') === 'yes';\n    if(!enabled) {\n      return false; // Let other savers handle it\n    }\n\n    // Validate configuration before claiming to handle the save\n    const endpoint = self.wiki.getTiddlerText('$:/config/cloudflare-saver/endpoint', '');\n    if(!endpoint || endpoint.trim() === '') {\n      return false; // Let other savers handle it if not configured\n    }\n\n    // We can handle save and autosave methods\n    if(method !== 'save' && method !== 'autosave') {\n      return false;\n    }\n\n    const config = {\n      endpoint,\n      timeout: Math.max(5, parseInt(self.wiki.getTiddlerText('$:/config/cloudflare-saver/timeout', '30')) || 30) * 1000,\n      notifications: self.wiki.getTiddlerText('$:/config/cloudflare-saver/notifications', 'yes') === 'yes',\n      autoRetry: self.wiki.getTiddlerText('$:/config/cloudflare-saver/auto-retry', 'yes') === 'yes',\n      rememberPassword: self.wiki.getTiddlerText('$:/config/cloudflare-saver/remember-password', 'no') === 'yes',\n      debug: self.wiki.getTiddlerText('$:/config/cloudflare-saver/debug', 'no') === 'yes'\n    };\n\n    if(config.debug) {\n      console.log('[CloudflareSaver] Starting save process');\n    }\n\n    let password = null;\n    if(config.rememberPassword && self.sessionPassword) {\n      password = self.sessionPassword;\n    } else {\n      password = prompt('Enter Cloudflare save password:');\n      if (!password) {\n        callback('Cloudflare save cancelled by user');\n        return false;\n      }\n      if(config.rememberPassword) {\n        self.sessionPassword = password;\n      }\n    }\n\n    if(config.notifications && typeof $tw !== 'undefined' && $tw.notifier) {\n      $tw.notifier.display('$:/plugins/collaborative-blog/notifications/saving');\n    }\n\n    self._performSave(text, password, callback, config, 0);\n    return true;\n  };\n\n  CloudflareSaver.prototype._performSave = async function(text, password, callback, config, retryCount) {\n    const self = this;\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), config.timeout);\n\n    try {\n      const payload = {\n        content: text,\n        password,\n        timestamp: new Date().toISOString(),\n        retryCount\n      };\n\n      const response = await fetch(config.endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload),\n        signal: controller.signal\n      });\n\n      clearTimeout(timeoutId);\n\n      if(response.ok) {\n        if(config.debug) {\n          console.log('[CloudflareSaver] Save successful');\n        }\n\n        // Update statistics\n        self._incrementStat('successful-saves');\n        self._updateLastSave('success');\n\n        callback(null);\n        if(config.notifications && typeof $tw !== 'undefined' && $tw.notifier) {\n          $tw.notifier.display('$:/plugins/collaborative-blog/notifications/success');\n        }\n      } else {\n        const responseText = await response.text();\n        self._handleSaveError(response.status, response.statusText, responseText, password, text, callback, config, retryCount);\n      }\n    } catch(error) {\n      clearTimeout(timeoutId);\n\n      // Handle abort/timeout separately\n      if (error.name === 'AbortError') {\n        self._handleSaveError(0, 'Request timeout', '', password, text, callback, config, retryCount);\n      } else {\n        self._handleSaveError(0, 'Network error', error.message, password, text, callback, config, retryCount);\n      }\n    }\n  };\n\n  CloudflareSaver.prototype._handleSaveError = function(status, statusText, responseText, password, text, callback, config, retryCount) {\n    const self = this;\n    const maxRetries = config.autoRetry ? 3 : 0;\n\n    let errorMsg = 'Cloudflare save failed';\n    if(status) {\n      errorMsg += `: HTTP ${  status}`;\n      if(statusText) {\n        errorMsg += ` ${  statusText}`;\n      }\n    }\n\n    // Parse response for detailed error information\n    if(responseText) {\n      try {\n        const response = JSON.parse(responseText);\n        if(response.error) {\n          errorMsg += ` - ${  response.error}`;\n        }\n        // Add rate limit information if available\n        if(response.resetIn) {\n          errorMsg += ` (retry in ${  response.resetIn  } seconds)`;\n        }\n      } catch(e) {\n        if(responseText.length < 200) {\n          errorMsg += ` - ${  responseText}`;\n        }\n      }\n    }\n\n    // Handle specific HTTP status codes\n    if(status === 401) {\n      self.sessionPassword = null;\n      errorMsg = 'Cloudflare authentication failed. Please check your password.';\n    } else if(status === 429) {\n      errorMsg = 'Rate limit exceeded. Please wait a minute before trying again.';\n    } else if(status === 413) {\n      errorMsg = 'Content too large. Your TiddlyWiki exceeds the maximum allowed size.';\n    } else if(status === 409) {\n      errorMsg = 'Conflict detected. Another save may be in progress.';\n    }\n\n    if(config.debug) {\n      console.error('[CloudflareSaver] Error:', errorMsg, {\n        status,\n        retryCount,\n        willRetry: retryCount < maxRetries && status !== 401\n      });\n    }\n\n    // Retry logic (don't retry auth failures or rate limits)\n    if(retryCount < maxRetries && status !== 401 && status !== 429) {\n      const retryDelay = Math.min(1000 * Math.pow(2, retryCount), 10000);\n      if(config.debug) {\n        console.log(`[CloudflareSaver] Retrying in ${  retryDelay / 1000  } seconds...`);\n      }\n      setTimeout(() => {\n        self._performSave(text, password, callback, config, retryCount + 1);\n      }, retryDelay);\n    } else {\n      // Update statistics for final failure\n      self._incrementStat('failed-saves');\n      self._updateLastSave('failure', errorMsg);\n\n      callback(errorMsg);\n      if(config.notifications && typeof $tw !== 'undefined' && $tw.notifier) {\n        $tw.notifier.display('$:/plugins/collaborative-blog/notifications/failure');\n      }\n    }\n  };\n\n  CloudflareSaver.prototype._incrementStat = function(statName) {\n    const tiddlerTitle = `$:/config/cloudflare-saver/stats/${statName}`;\n    const currentValue = parseInt(this.wiki.getTiddlerText(tiddlerTitle, '0')) || 0;\n    this.wiki.addTiddler(new $tw.Tiddler({\n      title: tiddlerTitle,\n      text: String(currentValue + 1)\n    }));\n  };\n\n  CloudflareSaver.prototype._updateLastSave = function(status, error) {\n    const timestamp = new Date().toISOString();\n    this.wiki.addTiddler(new $tw.Tiddler({\n      title: '$:/config/cloudflare-saver/stats/last-save-status',\n      text: status,\n      'last-save-time': timestamp,\n      'last-save-error': error || ''\n    }));\n  };\n\n  CloudflareSaver.prototype.info = {\n    name: 'cloudflare',\n    priority: 2000, // High priority - when enabled, prefer this over download saver\n    capabilities: ['save', 'autosave']\n  };\n\n  // Export saver info at module level\n  exports.info = {\n    name: 'cloudflare',\n    priority: 2000,\n    capabilities: ['save', 'autosave']\n  };\n\n  // Export module-level functions as required by TiddlyWiki\n  exports.canSave = function(wiki) {\n    // Use $tw.wiki global instead of wiki parameter during initialization\n    const enabled = $tw.wiki.getTiddlerText('$:/config/cloudflare-saver/enabled', 'no') === 'yes';\n    const endpoint = $tw.wiki.getTiddlerText('$:/config/cloudflare-saver/endpoint', '');\n    // Only claim we can save if both enabled AND endpoint is configured\n    return enabled && endpoint && endpoint.trim() !== '';\n  };\n\n  exports.create = function(wiki) {\n    return new CloudflareSaver(wiki);\n  };\n\n})();\n"}, "$:/plugins/collaborative-blog/startup.js": {"title": "$:/plugins/collaborative-blog/startup.js", "type": "application/javascript", "module-type": "startup", "text": "(function(){\n\n  'use strict';\n\n  exports.name = 'cloudflare-saver-startup';\n  exports.platforms = ['browser'];\n  exports.after = ['startup'];\n  exports.synchronous = true;\n\n  exports.startup = function() {\n    // Don't automatically set as default saver - let users choose\n\n    // Set up configuration defaults\n    const configDefaults = {\n      '$:/config/cloudflare-saver/endpoint': '',\n      '$:/config/cloudflare-saver/timeout': '30',\n      '$:/config/cloudflare-saver/notifications': 'yes',\n      '$:/config/cloudflare-saver/auto-retry': 'yes',\n      '$:/config/cloudflare-saver/remember-password': 'no',\n      '$:/config/cloudflare-saver/debug': 'no',\n      '$:/config/cloudflare-saver/enabled': 'no'\n    };\n\n    Object.keys(configDefaults).forEach((title) => {\n      if(!$tw.wiki.getTiddler(title)) {\n        $tw.wiki.addTiddler(new $tw.Tiddler({\n          title,\n          text: configDefaults[title]\n        }));\n      }\n    });\n\n    const enabled = $tw.wiki.getTiddlerText('$:/config/cloudflare-saver/enabled', 'no') === 'yes';\n    const debug = $tw.wiki.getTiddlerText('$:/config/cloudflare-saver/debug', 'no') === 'yes';\n\n    if (debug) {\n      console.log(`[CloudflareSaver] Plugin loaded successfully${  enabled ? ' and enabled' : ' (disabled)'}`);\n    }\n  };\n\n})();\n\n"}, "$:/plugins/collaborative-blog/test-action.js": {"title": "$:/plugins/collaborative-blog/test-action.js", "type": "application/javascript", "module-type": "widget", "text": "(function(){\n\n  'use strict';\n\n  const Widget = require('$:/core/modules/widgets/widget.js').widget;\n\n  const TestCloudflareAction = function(parseTreeNode,options) {\n    this.initialise(parseTreeNode,options);\n  };\n\n  TestCloudflareAction.prototype = new Widget();\n\n  TestCloudflareAction.prototype.render = function(_parent,_nextSibling) {\n    this.computeAttributes();\n    this.execute();\n  };\n\n  TestCloudflareAction.prototype.execute = function() {\n    // Nothing to execute\n  };\n\n  TestCloudflareAction.prototype.refresh = function(_changedTiddlers) {\n    return false;\n  };\n\n  TestCloudflareAction.prototype.invokeAction = function(_triggeringWidget,_event) {\n    const self = this;\n\n    // Get configuration\n    const endpoint = $tw.wiki.getTiddlerText('$:/config/cloudflare-saver/endpoint', '');\n    const enabled = $tw.wiki.getTiddlerText('$:/config/cloudflare-saver/enabled', 'no') === 'yes';\n\n    // Validate configuration\n    if (!enabled) {\n      self.showAlert('Cloudflare Saver is not enabled. Please enable it in the settings above.', 'error');\n      return true;\n    }\n\n    if (!endpoint || endpoint.trim() === '') {\n      self.showAlert('No Cloudflare Function endpoint configured. Please enter your endpoint URL above.', 'error');\n      return true;\n    }\n\n    // Get password\n    const password = prompt('Enter your Cloudflare save password to test the connection:');\n    if (!password) {\n      self.showAlert('Test cancelled - no password provided.', 'info');\n      return true;\n    }\n\n    // Show loading state\n    self.showNotification('$:/plugins/collaborative-blog/notifications/saving');\n\n    // Create test content\n    const testContent = $tw.wiki.renderTiddler('text/plain', '$:/core/save/all');\n\n    // Attempt to save\n    const timeout = Math.max(5, parseInt($tw.wiki.getTiddlerText('$:/config/cloudflare-saver/timeout', '30')) || 30) * 1000;\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n    const payload = {\n      content: testContent,\n      password,\n      timestamp: new Date().toISOString(),\n      retryCount: 0\n    };\n\n    fetch(endpoint, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(payload),\n      signal: controller.signal\n    })\n      .then((response) => {\n        clearTimeout(timeoutId);\n\n        if (response.ok) {\n          return response.json().then((data) => {\n            self.showNotification('$:/plugins/collaborative-blog/notifications/success');\n            self.showAlert(\n              `‚úÖ Test successful!\\n\\nConnection to Cloudflare Function verified.\\nCommit SHA: ${data.commit || 'N/A'}\\n\\nYour Cloudflare Saver is configured correctly.`,\n              'success'\n            );\n          });\n        } else {\n          return response.text().then((errorText) => {\n            let errorMsg = `HTTP ${response.status} ${response.statusText}`;\n            try {\n              const errorData = JSON.parse(errorText);\n              if (errorData.error) {\n                errorMsg = errorData.error;\n              }\n            } catch(e) {\n              // Use status text\n            }\n\n            self.showNotification('$:/plugins/collaborative-blog/notifications/failure');\n            self.showAlert(\n              `‚ùå Test failed!\\n\\nError: ${errorMsg}\\n\\nPlease check:\\n‚Ä¢ Your endpoint URL is correct\\n‚Ä¢ Your password matches SAVE_PASSWORD in Cloudflare\\n‚Ä¢ Environment variables are configured\\n‚Ä¢ The Cloudflare Function is deployed`,\n              'error'\n            );\n          });\n        }\n      })\n      .catch((error) => {\n        clearTimeout(timeoutId);\n\n        let errorMsg = 'Network error';\n        if (error.name === 'AbortError') {\n          errorMsg = 'Request timeout';\n        } else {\n          errorMsg = error.message;\n        }\n\n        self.showNotification('$:/plugins/collaborative-blog/notifications/failure');\n        self.showAlert(\n          `‚ùå Test failed!\\n\\nError: ${errorMsg}\\n\\nPlease check:\\n‚Ä¢ Your internet connection\\n‚Ä¢ The endpoint URL is accessible\\n‚Ä¢ CORS is configured to allow your origin\\n‚Ä¢ The Cloudflare Function is deployed`,\n          'error'\n        );\n      });\n\n    return true; // Prevent default action\n  };\n\n  TestCloudflareAction.prototype.showAlert = function(message, type) {\n    // Use TiddlyWiki's modal dialog\n    const tempTiddler = '$:/temp/cloudflare-test-result';\n\n    // Format message with proper TiddlyWiki markup\n    let icon = '';\n    let title = 'Cloudflare Save Test';\n    let color = '';\n\n    if (type === 'success') {\n      icon = '‚úÖ';\n      title = 'Test Successful';\n      color = 'green';\n    } else if (type === 'error') {\n      icon = '‚ùå';\n      title = 'Test Failed';\n      color = 'red';\n    } else if (type === 'info') {\n      icon = '‚ÑπÔ∏è';\n      title = 'Test Cancelled';\n      color = 'blue';\n    }\n\n    // Create formatted content using TiddlyWiki markup\n    const formattedText = `<div style=\"background-color: ${color === 'green' ? '#d4edda' : color === 'red' ? '#f8d7da' : '#d1ecf1'}; border: 1px solid ${color === 'green' ? '#c3e6cb' : color === 'red' ? '#f5c6cb' : '#bee5eb'}; border-radius: 4px; padding: 15px; margin: 10px 0;\">\n\n!! ${icon} ${title}\n\n${message.split('\\n').map(line => line.trim()).filter(line => line).join('\\n\\n')}\n\n</div>`;\n\n    $tw.wiki.addTiddler(new $tw.Tiddler({\n      title: tempTiddler,\n      text: formattedText,\n      type: 'text/vnd.tiddlywiki',\n      'modal-title': title\n    }));\n\n    $tw.modal.display(tempTiddler, {\n      downloadLink: null\n    });\n\n    // Don't auto-delete - let the user close the modal\n    // The modal will be recreated next time anyway\n  };\n\n  TestCloudflareAction.prototype.showNotification = function(tiddlerTitle) {\n    if (typeof $tw !== 'undefined' && $tw.notifier) {\n      $tw.notifier.display(tiddlerTitle);\n    }\n  };\n\n  exports['action-test-cloudflare'] = TestCloudflareAction;\n\n})();\n"}, "$:/plugins/collaborative-blog/clear-password-action.js": {"title": "$:/plugins/collaborative-blog/clear-password-action.js", "type": "application/javascript", "module-type": "widget", "text": "(function(){\n\n  'use strict';\n\n  const Widget = require('$:/core/modules/widgets/widget.js').widget;\n\n  const ClearPasswordAction = function(parseTreeNode,options) {\n    this.initialise(parseTreeNode,options);\n  };\n\n  ClearPasswordAction.prototype = new Widget();\n\n  ClearPasswordAction.prototype.render = function(_parent,_nextSibling) {\n    this.computeAttributes();\n    this.execute();\n  };\n\n  ClearPasswordAction.prototype.execute = function() {\n    // Nothing to execute\n  };\n\n  ClearPasswordAction.prototype.refresh = function(_changedTiddlers) {\n    return false;\n  };\n\n  ClearPasswordAction.prototype.invokeAction = function(_triggeringWidget,_event) {\n    // Clear the session password by sending a message to the saver\n    $tw.rootWidget.dispatchEvent({\n      type: 'cloudflare-clear-password'\n    });\n\n    // Show notification\n    if ($tw.notifier) {\n      const tempTiddler = '$:/temp/cloudflare-password-cleared';\n      $tw.wiki.addTiddler(new $tw.Tiddler({\n        title: tempTiddler,\n        text: 'Session password cleared',\n        tags: '$:/tags/Alert'\n      }));\n\n      setTimeout(() => {\n        $tw.wiki.deleteTiddler(tempTiddler);\n      }, 3000);\n    }\n\n    return true;\n  };\n\n  exports['action-clear-cloudflare-password'] = ClearPasswordAction;\n\n})();\n"}, "$:/plugins/collaborative-blog/settings": {"title": "$:/plugins/collaborative-blog/settings", "caption": "CloudFlare Saver", "tags": "$:/tags/ControlPanel/Saving", "text": "\\define config-base() $:/config/cloudflare-saver/\n\n!! ~CloudFlare Saver\n\n<$checkbox tiddler={{{ [<config-base>addsuffix[enabled]] }}} field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"no\"> Enable saving to Cloudflare Functions</$checkbox>\n\n<div class=\"tc-control-panel-hint\">\nSave your TiddlyWiki to GitHub via Cloudflare Functions with password authentication. Works as an additional save option alongside your existing save methods.\n</div>\n\n<$reveal state={{{ [<config-base>addsuffix[enabled]] }}} type=\"match\" text=\"yes\" animate=\"yes\">\n\n!!! Connection Status\n\n<div style=\"padding: 10px; background-color: #f8f9fa; border-radius: 4px; margin: 10px 0;\">\n<$list filter=\"[[$:/config/cloudflare-saver/stats/last-save-status]get[text]match[success]]\">\n<span style=\"color: green;\">‚óè</span> ''Last Save:'' Successful at <$view tiddler=\"$:/config/cloudflare-saver/stats/last-save-status\" field=\"last-save-time\"/>\n</$list>\n<$list filter=\"[[$:/config/cloudflare-saver/stats/last-save-status]get[text]match[failure]]\">\n<span style=\"color: red;\">‚óè</span> ''Last Save:'' Failed at <$view tiddler=\"$:/config/cloudflare-saver/stats/last-save-status\" field=\"last-save-time\"/>\n<br>''Error:'' <$view tiddler=\"$:/config/cloudflare-saver/stats/last-save-status\" field=\"last-save-error\"/>\n</$list>\n<$list filter=\"[[$:/config/cloudflare-saver/stats/last-save-status]!has[text]]\">\n<span style=\"color: gray;\">‚óè</span> ''Status:'' No saves yet\n</$list>\n</div>\n\n!!! Save Statistics\n\n<div style=\"padding: 10px; background-color: #f8f9fa; border-radius: 4px; margin: 10px 0;\">\n''Successful Saves:'' <$text text={{{ [[$:/config/cloudflare-saver/stats/successful-saves]get[text]else[0]] }}}/>\n<br>\n''Failed Saves:'' <$text text={{{ [[$:/config/cloudflare-saver/stats/failed-saves]get[text]else[0]] }}}/>\n<br>\n<$button class=\"tc-btn-invisible tc-tiddlylink\">\nüîÑ Reset Statistics\n<$action-deletetiddler $tiddler=\"$:/config/cloudflare-saver/stats/successful-saves\"/>\n<$action-deletetiddler $tiddler=\"$:/config/cloudflare-saver/stats/failed-saves\"/>\n<$action-deletetiddler $tiddler=\"$:/config/cloudflare-saver/stats/last-save-status\"/>\n</$button>\n</div>\n\n!!! Cloudflare Function Endpoint URL\n\n<$edit-text tiddler={{{ [<config-base>addsuffix[endpoint]] }}} field=\"text\" default=\"\" placeholder=\"https://your-site.pages.dev/save\" tag=\"input\" type=\"url\" class=\"tc-edit-text\"/>\n\n<div class=\"tc-control-panel-hint\">\nThe full URL to your deployed Cloudflare Function endpoint (e.g., `https://my-wiki.pages.dev/save`)\n</div>\n\n!!! Advanced Options\n\n<$checkbox tiddler={{{ [<config-base>addsuffix[notifications]] }}} field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"yes\"> Show save notifications</$checkbox>\n\n<$checkbox tiddler={{{ [<config-base>addsuffix[auto-retry]] }}} field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"yes\"> Auto-retry failed saves (up to 3 attempts)</$checkbox>\n\n<$checkbox tiddler={{{ [<config-base>addsuffix[remember-password]] }}} field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"no\"> Remember password during session</$checkbox>\n\n<$reveal state={{{ [<config-base>addsuffix[remember-password]] }}} type=\"match\" text=\"yes\">\n<div style=\"margin-left: 25px;\">\n<$button class=\"tc-btn-invisible tc-tiddlylink\">\nüîë Clear Remembered Password\n<$action-clear-cloudflare-password/>\n</$button>\n</div>\n</$reveal>\n\n<div class=\"tc-control-panel-hint\">\nPassword is stored in memory only and cleared on page reload. Only enable on trusted devices.\n</div>\n\n<$checkbox tiddler={{{ [<config-base>addsuffix[debug]] }}} field=\"text\" checked=\"yes\" unchecked=\"no\" default=\"no\"> Enable debug logging to console</$checkbox>\n\n!!! Request Timeout\n\n<$edit-text tiddler={{{ [<config-base>addsuffix[timeout]] }}} field=\"text\" default=\"30\" tag=\"input\" type=\"number\" min=\"5\" class=\"tc-edit-text\" size=\"10\"/> seconds\n\n<div class=\"tc-control-panel-hint\">\nHow long to wait for save requests before timing out (minimum 5 seconds)\n</div>\n\n!!! Quick Setup Wizard\n\n<$button class=\"tc-btn-big-green\">\nüöÄ Launch Setup Wizard\n<$action-navigate $to=\"$:/plugins/collaborative-blog/wizard\"/>\n</$button>\n\n<div class=\"tc-control-panel-hint\">\nStep-by-step guided setup for first-time users\n</div>\n\n!!! Setup Instructions\n\n<$button set=\"$:/state/cloudflare-saver/show-setup\" setTo=\"yes\" class=\"\">\n<$list filter=\"[[$:/state/cloudflare-saver/show-setup]get[text]match[yes]]\" emptyMessage=\"‚ñ∂ Click to expand setup guide\">\n‚ñº Click to hide setup guide\n</$list>\n</$button>\n\n<$reveal state=\"$:/state/cloudflare-saver/show-setup\" type=\"match\" text=\"yes\" animate=\"yes\">\n\n''1. Create Cloudflare Pages Site''\n\n# Go to [[Cloudflare Pages|https://pages.cloudflare.com/]]\n# Connect your GitHub account and create a Pages project from your TiddlyWiki repository\n# Deploy your site (e.g., `https://my-tiddlywiki.pages.dev`)\n\n''2. Create GitHub Personal Access Token''\n\n# Go to GitHub ‚Üí Settings ‚Üí Developer settings ‚Üí [[Personal access tokens|https://github.com/settings/tokens]]\n# Click \"Generate new token (classic)\"\n# Select scope: `repo` (Full control of private repositories)\n# Copy the token securely\n\n''3. Create Cloudflare Function''\n\nCreate a file at `functions/save.js` in your repository root. The complete, production-ready function code is available at:\n\nhttps://github.com/BenSweaterVest/tiddlywiki-cloudflare-saver/blob/main/demo/functions/save.js\n\nThe function includes password authentication, rate limiting, content validation, retry logic, and proper UTF-8 handling.\n\n''4. Set Environment Variables''\n\nIn Cloudflare Pages ‚Üí Settings ‚Üí Environment Variables ‚Üí Production:\n\n|!Variable |!Type |!Description |\n|`GITHUB_TOKEN` |Secret |GitHub Personal Access Token (with `repo` scope) |\n|`GITHUB_REPO` |Text |Repository in format `username/repo-name` |\n|`SAVE_PASSWORD` |Secret |Password for authenticating saves |\n|`FILE_PATH` |Text |Path to TiddlyWiki file (optional, default: `index.html`) |\n|`MAX_CONTENT_SIZE` |Text |Max file size in bytes (optional, default: 52428800 = 50MB) |\n|`ALLOWED_ORIGINS` |Text |Comma-separated origins for CORS (optional, default: `*`) |\n\nMark `GITHUB_TOKEN` and `SAVE_PASSWORD` as encrypted/secret variables.\n\n''5. Configure and Test''\n\n# Enter your Cloudflare Function URL above\n# Use the TiddlyWiki save button - you'll be prompted for your password\n# Check for success notification\n\n</$reveal>\n\n!!! Test Connection\n\n<$button class=\"tc-btn-big-green\">\n{{$:/core/images/save-button}} Test Cloudflare Save\n<$action-test-cloudflare/>\n</$button>\n\n<div class=\"tc-control-panel-hint\">\nThis will test your Cloudflare Function connection without triggering other savers. You'll be prompted for your password and will see a clear success or error message.\n</div>\n\n</$reveal>\n"}, "$:/plugins/collaborative-blog/wizard": {"title": "$:/plugins/collaborative-blog/wizard", "caption": "Cloudflare Saver Setup Wizard", "text": "\\define wizard-state() $:/state/cloudflare-saver/wizard-step\n\n!! üöÄ Cloudflare Saver Setup Wizard\n\nWelcome! This wizard will guide you through setting up your Cloudflare Saver plugin step by step.\n\n<$reveal state=<<wizard-state>> type=\"nomatch\" text=\"1\" tag=\"div\">\n<$button set=<<wizard-state>> setTo=\"1\" class=\"tc-btn-big-green\">\nStart Setup Wizard\n</$button>\n</$reveal>\n\n<$reveal state=<<wizard-state>> type=\"match\" text=\"1\" tag=\"div\">\n\n!!! Step 1: Create GitHub Repository\n\nYou need a GitHub repository to store your TiddlyWiki file.\n\n''What to do:''\n\n# Go to https://github.com/new\n# Name your repository (e.g., `my-tiddlywiki`)\n# Choose Public or Private\n# Click \"Create repository\"\n# Upload your `index.html` TiddlyWiki file to the repository\n\n<$checkbox tiddler=\"$:/state/cloudflare-saver/wizard-step1-done\" field=\"text\" checked=\"yes\" unchecked=\"no\"> I've created my repository</$checkbox>\n\n<$reveal state=\"$:/state/cloudflare-saver/wizard-step1-done\" type=\"match\" text=\"yes\">\n<$button set=<<wizard-state>> setTo=\"2\" class=\"tc-btn-big-green\">\nNext Step ‚Üí\n</$button>\n</$reveal>\n\n</$reveal>\n\n<$reveal state=<<wizard-state>> type=\"match\" text=\"2\" tag=\"div\">\n\n!!! Step 2: Create Cloudflare Pages Site\n\nConnect your repository to Cloudflare Pages.\n\n''What to do:''\n\n# Go to https://pages.cloudflare.com/\n# Click \"Create a project\"\n# Connect your GitHub account\n# Select your TiddlyWiki repository\n# Use these settings:\n## Build command: (leave empty)\n## Build output directory: `/`\n# Click \"Save and Deploy\"\n# Wait for deployment to complete\n# Copy your site URL (e.g., `https://my-wiki.pages.dev`)\n\n''Your Cloudflare Pages URL:''\n<$edit-text tiddler=\"$:/state/cloudflare-saver/wizard-pages-url\" field=\"text\" tag=\"input\" type=\"url\" class=\"tc-edit-text\" placeholder=\"https://my-wiki.pages.dev\"/>\n\n<$reveal state=\"$:/state/cloudflare-saver/wizard-pages-url\" type=\"nomatch\" text=\"\">\n<$button set=<<wizard-state>> setTo=\"3\" class=\"tc-btn-big-green\">\nNext Step ‚Üí\n</$button>\n</$reveal>\n\n<$button set=<<wizard-state>> setTo=\"1\" class=\"tc-btn-invisible tc-tiddlylink\">\n‚Üê Previous\n</$button>\n\n</$reveal>\n\n<$reveal state=<<wizard-state>> type=\"match\" text=\"3\" tag=\"div\">\n\n!!! Step 3: Create GitHub Personal Access Token\n\nThis allows Cloudflare to save changes to your repository.\n\n''What to do:''\n\n# Go to https://github.com/settings/tokens\n# Click \"Generate new token\" ‚Üí \"Generate new token (classic)\"\n# Name it \"TiddlyWiki Cloudflare Saver\"\n# Set expiration (recommend: No expiration for personal wikis)\n# Check the `repo` scope (Full control of private repositories)\n# Click \"Generate token\"\n# '''IMPORTANT:''' Copy the token immediately (it won't be shown again!)\n\n<$checkbox tiddler=\"$:/state/cloudflare-saver/wizard-step3-done\" field=\"text\" checked=\"yes\" unchecked=\"no\"> I've generated and copied my token</$checkbox>\n\n<$reveal state=\"$:/state/cloudflare-saver/wizard-step3-done\" type=\"match\" text=\"yes\">\n<$button set=<<wizard-state>> setTo=\"4\" class=\"tc-btn-big-green\">\nNext Step ‚Üí\n</$button>\n</$reveal>\n\n<$button set=<<wizard-state>> setTo=\"2\" class=\"tc-btn-invisible tc-tiddlylink\">\n‚Üê Previous\n</$button>\n\n</$reveal>\n\n<$reveal state=<<wizard-state>> type=\"match\" text=\"4\" tag=\"div\">\n\n!!! Step 4: Create Cloudflare Function\n\nThis is the serverless function that handles saves.\n\n''What to do:''\n\n# In your repository on GitHub, create a new folder called `functions`\n# Inside `functions`, create a file called `save.js`\n# Copy the code from: https://github.com/BenSweaterVest/tiddlywiki-cloudflare-saver/blob/main/demo/functions/save.js\n# Commit the file\n\n<$checkbox tiddler=\"$:/state/cloudflare-saver/wizard-step4-done\" field=\"text\" checked=\"yes\" unchecked=\"no\"> I've created functions/save.js</$checkbox>\n\n<$reveal state=\"$:/state/cloudflare-saver/wizard-step4-done\" type=\"match\" text=\"yes\">\n<$button set=<<wizard-state>> setTo=\"5\" class=\"tc-btn-big-green\">\nNext Step ‚Üí\n</$button>\n</$reveal>\n\n<$button set=<<wizard-state>> setTo=\"3\" class=\"tc-btn-invisible tc-tiddlylink\">\n‚Üê Previous\n</$button>\n\n</$reveal>\n\n<$reveal state=<<wizard-state>> type=\"match\" text=\"5\" tag=\"div\">\n\n!!! Step 5: Configure Environment Variables\n\nSet up the secrets and configuration in Cloudflare.\n\n''What to do:''\n\n# Go to your Cloudflare Pages dashboard\n# Select your project\n# Go to Settings ‚Üí Environment Variables\n# Click \"Add variable\" for Production\n# Add these variables:\n\n|!Variable |!Value |!Encrypt? |\n|`GITHUB_TOKEN` |Your GitHub token from Step 3 |‚úì Yes |\n|`GITHUB_REPO` |`your-username/your-repo-name` |No |\n|`SAVE_PASSWORD` |Choose a password for saves |‚úì Yes |\n\n# Click \"Save\"\n# Wait for the automatic redeploy\n\n<$checkbox tiddler=\"$:/state/cloudflare-saver/wizard-step5-done\" field=\"text\" checked=\"yes\" unchecked=\"no\"> I've set up all environment variables</$checkbox>\n\n<$reveal state=\"$:/state/cloudflare-saver/wizard-step5-done\" type=\"match\" text=\"yes\">\n<$button set=<<wizard-state>> setTo=\"6\" class=\"tc-btn-big-green\">\nNext Step ‚Üí\n</$button>\n</$reveal>\n\n<$button set=<<wizard-state>> setTo=\"4\" class=\"tc-btn-invisible tc-tiddlylink\">\n‚Üê Previous\n</$button>\n\n</$reveal>\n\n<$reveal state=<<wizard-state>> type=\"match\" text=\"6\" tag=\"div\">\n\n!!! Step 6: Configure Plugin\n\nAlmost done! Now configure the plugin in TiddlyWiki.\n\n''Your endpoint URL is:''\n\n<div style=\"background-color: #f8f9fa; padding: 10px; border-radius: 4px; margin: 10px 0; font-family: monospace;\">\n<$text text={{{ [[$:/state/cloudflare-saver/wizard-pages-url]get[text]addsuffix[/save]] }}}/>\n</div>\n\n<$button class=\"tc-btn-big-green\">\nAuto-Configure Plugin\n<$action-setfield $tiddler=\"$:/config/cloudflare-saver/enabled\" text=\"yes\"/>\n<$action-setfield $tiddler=\"$:/config/cloudflare-saver/endpoint\" text={{{ [[$:/state/cloudflare-saver/wizard-pages-url]get[text]addsuffix[/save]] }}}/>\n<$action-setfield $tiddler=\"$:/config/cloudflare-saver/notifications\" text=\"yes\"/>\n<$action-setfield $tiddler=\"$:/config/cloudflare-saver/auto-retry\" text=\"yes\"/>\n<$action-navigate $to=\"$:/ControlPanel\" $scroll=\"yes\"/>\n</$button>\n\n<div class=\"tc-control-panel-hint\">\nThis will enable the plugin and set your endpoint URL automatically.\n</div>\n\n<$button set=<<wizard-state>> setTo=\"5\" class=\"tc-btn-invisible tc-tiddlylink\">\n‚Üê Previous\n</$button>\n\n</$reveal>\n\n<hr>\n\n<$button class=\"tc-btn-invisible tc-tiddlylink\">\nüè† Return to Settings\n<$action-navigate $to=\"$:/ControlPanel\"/>\n<$action-deletetiddler $tiddler=<<wizard-state>>/>\n<$action-deletetiddler $tiddler=\"$:/state/cloudflare-saver/wizard-step1-done\"/>\n<$action-deletetiddler $tiddler=\"$:/state/cloudflare-saver/wizard-step3-done\"/>\n<$action-deletetiddler $tiddler=\"$:/state/cloudflare-saver/wizard-step4-done\"/>\n<$action-deletetiddler $tiddler=\"$:/state/cloudflare-saver/wizard-step5-done\"/>\n<$action-deletetiddler $tiddler=\"$:/state/cloudflare-saver/wizard-pages-url\"/>\n</$button>\n"}, "$:/plugins/collaborative-blog/notifications/saving": {"title": "$:/plugins/collaborative-blog/notifications/saving", "type": "text/vnd.tiddlywiki", "text": "<div class=\"tc-notification-banner\">\n<$button class=\"tc-btn-invisible tc-notification-btn\" message=\"tm-close-tiddler\">{{$:/core/images/close-button}}</$button>\n<span class=\"tc-notification-loading\">{{$:/core/images/spiral}}</span> Saving to GitHub via Cloudflare...\n</div>\n"}, "$:/plugins/collaborative-blog/notifications/success": {"title": "$:/plugins/collaborative-blog/notifications/success", "type": "text/vnd.tiddlywiki", "text": "<div class=\"tc-notification-banner tc-notification-banner-success\">\n<$button class=\"tc-btn-invisible tc-notification-btn\" message=\"tm-close-tiddler\">{{$:/core/images/close-button}}</$button>\n{{$:/core/images/done-button}} Successfully saved to GitHub!\n</div>\n"}, "$:/plugins/collaborative-blog/notifications/failure": {"title": "$:/plugins/collaborative-blog/notifications/failure", "type": "text/vnd.tiddlywiki", "text": "<div class=\"tc-notification-banner tc-notification-banner-error\">\n<$button class=\"tc-btn-invisible tc-notification-btn\" message=\"tm-close-tiddler\">{{$:/core/images/close-button}}</$button>\n{{$:/core/images/warning}} Save failed. Check console for details.\n</div>\n"}}}